<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>DZ_Form</title>
    <link rel="stylesheet" type="text/css" href="styles.css"/>
</head>
<body>
<form class="formWithValidation">
    <h2>Форма регистрации пользователей</h2>
    <p>
        <label for="name">Имя:</label>
        <input type="text" class="name field" autofocus id="name" placeholder="Имя" name="name"/>
    </p>
    <p>
        <label for="surname">Фамилия: </label>
        <input type="text" class="surname field" autofocus id="surname" placeholder="Фамилия" name="surname"/>
    </p>
    <p>
    <p>
        <label for="email">Email: </label>
        <input type="text" autofocus id="email" placeholder="user@gmail.com" name="email"/>
    </p>
    <p>
        <label for="phone">Телефон: </label>
        <input type="tel" placeholder="(XXX)-XXX-XXXX" id="phone" name="phone"/>
    </p>
    <label for="login">Логин: </label>
    <input type="text" autofocus id="login" name="login"/>
    </p>
    <p>
        <label for="password">Пароль: </label>
        <input type="password" id="password" name="password" class='password'/>
    </p>
    <p>
        <label>Подтвердите пароль:</label>
        <input type='password' class='passwordConfirmation'/>
    </p>
    <p>
        <label for="age">Возраст: </label>
        <input type="number" step="1" min="1" max="100" value="10" id="age" name="age"/>
    </p>
    <h3>Укажите пол</h3>
    <p>
        <input type="radio" value="man" checked name="gender"/>мужской
    </p>
    <p>
        <input type="radio" value="woman" name="gender"/>женский
    </p>
    <h3>Выберите технологию</h3>
    <p>
        <input type="radio" value="html5" checked name="tech"/>HTML5
    </p>
    <p>
        <input type="radio" value="net" name="tech"/>.NET
    </p>
    <p>
        <input type="radio" value="java" name="tech"/>NodeJS
    </p>
    <p>
        <button type="submit" class="validateBtn">Отправить</button>
        <button type="reset">Отмена</button>
    </p>
</form>

<script>
    var form = document.querySelector('.formWithValidation');
    var fields = form.querySelectorAll('.field')
    var passwordConfirmation = form.querySelector('.passwordConfirmation')

    var removeValidation = function () {
        var errors = form.querySelectorAll('.error')

        for (var i = 0; i < errors.length; i++) {
            errors[i].remove()
        }
    }

    var checkFieldsPresence = function () {
        for (var i = 0; i < fields.length; i++) {
            if (!fields[i].value) {
                console.log('field is blank', fields[i])
                var error = generateError('Cant be blank')
                form[i].parentElement.insertBefore(error, fields[i])
            }
        }
    }

    var generateError = function (text) {
        var error = document.createElement('div')
        error.className = 'error'
        error.style.color = 'red'
        error.innerHTML = text
        return error
    }

    var checkPasswordMatch = function () {
        if (password.value !== passwordConfirmation.value) {
            console.log('not equals')
            var error = generateError('Password doesnt match')
            console.log(error)
            password.parentElement.insertBefore(error, password)
        }
    }

    form.addEventListener('submit', function (event) {
        event.preventDefault()

        removeValidation()

        checkFieldsPresence()

        checkPasswordMatch()
    })

</script>
</body>
</html>